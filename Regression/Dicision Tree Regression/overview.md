# 📘 결정 트리 회귀 (Decision Tree Regression)

## 1. 결정 트리 회귀란?

**결정 트리 회귀(Decision Tree Regression)**는 데이터를 나무(Tree) 구조로 나눠가며 예측하는 회귀 모델입니다.

> 입력 데이터를 조건에 따라 계속 나눠가며,  
> 각 영역에서의 평균값으로 예측을 수행합니다.

---

## 2. 어떻게 작동하나요?

결정 트리 회귀는 다음과 같은 과정을 거칩니다:

1. **데이터를 조건에 따라 분할**합니다.
2. 분할된 그룹(leaf node)마다 **출력값의 평균**을 예측값으로 사용합니다.
3. 예측 시, 새로운 데이터가 어떤 분기 조건을 따라가게 되는지 보고  
   그에 해당하는 리프 노드의 평균값을 출력합니다.

---

## 3. 예시

### 🎯 집 가격 예측 문제:

| 크기(㎡) | 방 개수 | 가격(만원) |
|----------|----------|------------|
| 40       | 2        | 200        |
| 50       | 3        | 300        |
| 100      | 4        | 600        |
| 110      | 5        | 700        |

> → "크기 <= 75㎡" 이면 평균 250,  
> → "크기 > 75㎡" 이면 평균 650 으로 예측

---

## 4. 시각적 구조

            [크기 <= 75㎡]
            /          \
      예측: 250     [방 개수 <= 4]
                     /         \
              예측: 600     예측: 700

- 트리는 **조건(if)**을 따라 데이터를 쪼갭니다
- 리프 노드에 도달하면 평균값을 예측값으로 사용합니다

---

## 5. 선형 회귀와의 차이점

| 항목         | 선형 회귀           | 결정 트리 회귀        |
|--------------|----------------------|------------------------|
| 예측 방식    | 하나의 수식(직선/곡선) | 구간별 평균값           |
| 유연성       | 제한적 (곡선 표현 어려움) | 자유로움 (복잡한 구조 가능) |
| 해석력       | 수식 기반 해석 쉬움     | 시각적으로 직관적       |
| 오버피팅 위험 | 낮음                 | 높음 (깊은 트리일 경우)  |

---

## 6. Python 예제 코드

```python
import numpy as np
import matplotlib.pyplot as plt
from sklearn.tree import DecisionTreeRegressor

# 데이터 생성
X = np.array([[1], [2], [3], [4], [5], [6], [7], [8], [9], [10]])
y = np.array([5, 7, 8, 12, 15, 14, 16, 17, 19, 20])

# 모델 훈련
model = DecisionTreeRegressor(max_depth=3)
model.fit(X, y)

# 예측
X_test = np.linspace(1, 10, 100).reshape(-1, 1)
y_pred = model.predict(X_test)

# 시각화
plt.scatter(X, y, color='red', label='데이터')
plt.plot(X_test, y_pred, color='blue', label='결정 트리 예측')
plt.title("Decision Tree Regression")
plt.xlabel("X")
plt.ylabel("y")
plt.legend()
plt.grid()
plt.show()
```

## 7. 하이퍼파라미터 (중요 설정값)
|파라미터|	설명|
|---|---|
|max_depth|	트리의 최대 깊이 (오버피팅 방지용)|
|min_samples_split|	내부 노드 분할을 위한 최소 샘플 수|
|min_samples_leaf|	리프 노드에 필요한 최소 샘플 수|
